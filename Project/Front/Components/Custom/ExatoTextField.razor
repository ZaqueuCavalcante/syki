@using System.Linq.Expressions

@namespace Exato.Front.Components.Custom

<MudTextField
    T="string"
    For="@For"
    Typo="@Typo"
    Mask="@Mask"
    Lines="@Lines"
    Class="@Class"
    Label="@Label"
    Value="@Value"
    Style="@Style"
    Required="@Required"
    OnlyValidateIfDirty
    AutoGrow="@AutoGrow"
    MaxLines="@MaxLines"
    ReadOnly="@ReadOnly"
    Disabled="@Disabled"
    Margin="Margin.Dense"
    Immediate="@Immediate"
    MaxLength="@MaxLength"
    AutoFocus="@AutoFocus"
    RequiredError="Informe!"
    Variant="Variant.Outlined"
    ValueChanged="@ValueChanged"
    OnAdornmentClick="@OnAdornmentClick"
	AdornmentIcon="@Icons.Material.Filled.ContentCopy"
    Adornment="@(CopyAdornment ? Adornment.End : Adornment.None)"
/>

@inject ClipboardService ClipboardService

@code
{
    [Parameter]
    public string Value { get; set; }

    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    [Parameter]
    public Expression<Func<string>>? For { get; set; }

    [Parameter]
    public IMask Mask { get; set; }

    [Parameter]
    public Typo Typo { get; set; } = Typo.body1;

    [Parameter]
    public int Lines { get; set; }

    [Parameter]
    public int MaxLines { get; set; }

    [Parameter]
    public bool AutoGrow { get; set; }

    [Parameter]
    public bool Required { get; set; }

    [Parameter]
    public bool Immediate { get; set; }

    [Parameter]
    public string Label { get; set; }

    [Parameter]
    public string Style { get; set; }

    [Parameter]
    public string Class { get; set; } = "pb-2";
    
    [Parameter]
    public bool AutoFocus { get; set; }

    [Parameter]
    public bool ReadOnly { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public int MaxLength { get; set; } = 100;

	[Parameter]
	public bool CopyAdornment { get; set; }

	private async Task OnAdornmentClick()
	{
		await ClipboardService.CopyToClipboard(Value);
	}
}
