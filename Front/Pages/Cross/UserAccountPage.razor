@using Syki.Front.Features.Cross.SetupMfa
@using Syki.Front.Features.Cross.GetMfaKey

@namespace Syki.Front.Pages.Cross

@page "/account"

<SykiPageTitle Title="Conta" />

<MudContainer Class="mt-10 px-8">
    <MudContainer Class="px-0 mb-4">
        <MudGrid Spacing="4">
            <MudItem xs="12" sm="12" md="12" lg="12">
                <MudStack Row Justify="Justify.Center">
                    <MudStack Spacing="2">
                        <style>
                            .mud-badge.mud-badge-icon .mud-icon-badge {
                                font-size: 18px;
                            }
                        </style>
                        <MudBadge OnClick="@Edit" Icon="@Icons.Material.Filled.Edit" Color="Color.Primary" Overlap="true" Origin="Origin.BottomRight" BadgeClass="cursor-pointer syki-profile-photo-badge-icon">
                            <MudImage Style="border-radius: 50%;" Width="180" FallbackSrc="user-photo-fallback.png" Src="@(_data.ProfilePhoto ?? "")"></MudImage>
                        </MudBadge>
                        <MudText Typo="Typo.h5" Style="font-weight: bold" Class="ml-2">@_data.Name</MudText>
                        <MudText Class="ml-2" Style="margin-top: -8px;">@_data.Role.GetDescription()</MudText>
                    </MudStack>
                </MudStack>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" lg="6">
                <InfoCard Icon="@Icons.Material.Filled.Email" Title="Email" Content="@_data.Email" />
            </MudItem>
            <MudItem xs="12" sm="12" md="12" lg="6">
                <InfoCard Icon="@Icons.Material.Filled.School" Title="Instituição" Content="@_data.Institution" />
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudContainer>

@inject GetUserAccountClient GetUserAccountClient

@code
{
    private GetUserAccountOut _data = new();

    protected override async Task OnInitializedAsync()
    {
        _data = await GetUserAccountClient.Get();
    }

    private async Task Edit()
    {
        await Task.Delay(0);
        Console.WriteLine("EDIT");
    }
}
