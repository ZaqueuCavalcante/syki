@namespace Syki.Front.Components.Passwords

<MudTextField
    Margin="Margin.Dense"
    Adornment="Adornment.End"
    AdornmentIcon="@_passwordIcon"
    OnAdornmentClick="@PasswordIconClick"
    InputType="@_passwordInputType"
    Label="Senha"
    Class="@Class"
    Immediate
    OnlyValidateIfDirty
    Value="@Value"
    ValueChanged="@ValueChanged"
    Variant="Variant.Outlined"
    Required="@Required"
    RequiredError="Informe!"
/>

@code
{
    [Parameter]
    public bool Required { get; set; }

    [Parameter]
    public string Value { get; set; }
    
    [Parameter]
    public string Class { get; set; }

    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    private bool _showPassword;
    private InputType _passwordInputType = InputType.Password;
    private string _passwordIcon = Icons.Material.Filled.VisibilityOff;

    private void PasswordIconClick()
    {
        @if (_showPassword)
        {
            _showPassword = false;
            _passwordIcon = Icons.Material.Filled.VisibilityOff;
            _passwordInputType = InputType.Password;
        }
        else
        {
            _showPassword = true;
            _passwordIcon = Icons.Material.Filled.Visibility;
            _passwordInputType = InputType.Text;
        }
    }
}
